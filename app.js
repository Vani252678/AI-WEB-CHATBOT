// Application State (using variables instead of localStorage)
let appState = {
    theme: 'light',
    language: 'en',
    voiceOutputEnabled: true,
    conversationHistory: [],
    userName: '',
    context: {}
};

// Language Configuration
const languages = {
    en: {
        code: 'en-US',
        name: 'English',
        greeting: "Hello! I'm your AI assistant. How can I help you today?",
        voiceCode: 'en-US'
    },
    hi: {
        code: 'hi-IN',
        name: 'рд╣рд┐рдВрджреА',
        greeting: 'рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрдХрд╛ AI рд╕рд╣рд╛рдпрдХ рд╣реВрдВред рдЖрдЬ рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?',
        voiceCode: 'hi-IN'
    }
};

// Comprehensive Knowledge Base
const knowledgeBase = {
    greetings: [
        {
            patterns: ['hello', 'hi', 'hey', 'namaste', 'namaskar', 'hola', 'greetings'],
            responses: {
                en: ["Hello! I'm happy to chat with you. How can I help you today? ЁЯШК", "Hi there! Great to see you. What can I do for you?", "Hey! I'm here to help. What's on your mind?"],
                hi: ["рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрд╕реЗ рдмрд╛рдд рдХрд░рдХреЗ рдЦреБрд╢ рд╣реВрдВред рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ? ЁЯШК", "рдирдорд╕реНрдХрд╛рд░! рдЖрдкрд╕реЗ рдорд┐рд▓рдХрд░ рдЕрдЪреНрдЫрд╛ рд▓рдЧрд╛ред рдореИрдВ рдХреНрдпрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?", "рд╣реИрд▓реЛ! рдореИрдВ рдорджрдж рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдВ рд╣реВрдВред"]
            }
        },
        {
            patterns: ['how are you', 'whats up', 'how do you do', 'kaise ho', 'kya hal hai'],
            responses: {
                en: ["I'm doing great! Thanks for asking. I'm here to help and chat with you. ЁЯОЙ", "I'm wonderful! How can I assist you today?", "Doing fantastic! What brings you here?"],
                hi: ["рдореИрдВ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реВрдВ! рдкреВрдЫрдиреЗ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред рдореИрдВ рдЖрдкрдХреА рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдВ рд╣реВрдВред ЁЯОЙ", "рдореИрдВ рд╢рд╛рдирджрд╛рд░ рд╣реВрдВ! рдЖрдЬ рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?", "рдмрд╣реБрдд рдмрдврд╝рд┐рдпрд╛ рд╣реВрдВ! рдЖрдк рдпрд╣рд╛рдБ рдХреНрдпреЛрдВ рдЖрдП рд╣реИрдВ?"]
            }
        },
        {
            patterns: ['good morning', 'good afternoon', 'good evening', 'good night', 'suprabhat', 'shubh ratri'],
            responses: {
                en: ["Good morning! тШАя╕П I hope you have a wonderful day ahead!", "Good day to you! How can I brighten your day?", "Hello! Wishing you an amazing day!"],
                hi: ["рд╕реБрдкреНрд░рднрд╛рдд! тШАя╕П рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ рдХрд┐ рдЖрдкрдХрд╛ рджрд┐рди рд╢рд╛рдирджрд╛рд░ рд╣реЛрдЧрд╛!", "рдЖрдкрдХреЛ рджрд┐рди рдХреА рд╢реБрднрдХрд╛рдордирд╛рдПрдВ! рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?", "рдирдорд╕реНрддреЗ! рдЖрдкрдХрд╛ рджрд┐рди рдордВрдЧрд▓рдордп рд╣реЛ!"]
            }
        },
        {
            patterns: ['bye', 'goodbye', 'see you', 'alvida', 'namaste goodbye'],
            responses: {
                en: ["Goodbye! Have a great day ahead! ЁЯСЛ", "See you later! Take care!", "Farewell! Come back anytime!"],
                hi: ["рдЕрд▓рд╡рд┐рджрд╛! рдЖрдкрдХрд╛ рджрд┐рди рд╢реБрдн рд╣реЛ! ЁЯСЛ", "рдлрд┐рд░ рдорд┐рд▓реЗрдВрдЧреЗ! рдЦреНрдпрд╛рд▓ рд░рдЦрдирд╛!", "рдирдорд╕реНрддреЗ! рдХрднреА рднреА рд╡рд╛рдкрд╕ рдЖрдПрдВ!"]
            }
        },
        {
            patterns: ['thank you', 'thanks', 'appreciate', 'dhanyavad', 'shukriya'],
            responses: {
                en: ["You're welcome! Happy to help! ЁЯШК", "My pleasure! Anytime!", "Glad I could help!"],
                hi: ["рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ! рдорджрдж рдХрд░рдХреЗ рдЦреБрд╢реА рд╣реБрдИ! ЁЯШК", "рдореЗрд░реА рдЦреБрд╢реА! рдХрднреА рднреА!", "рдореБрдЭреЗ рдорджрдж рдХрд░рдХреЗ рдЕрдЪреНрдЫрд╛ рд▓рдЧрд╛!"]
            }
        }
    ],
    technology: [
        {
            patterns: ['smartphone', 'mobile', 'phone', 'iphone', 'android', 'mobile phone'],
            responses: {
                en: ["Great question! The latest smartphones feature advanced processors, high-refresh displays, and impressive camera systems. What specific device are you interested in learning about?", "Smartphones have come a long way! Today's devices offer AI capabilities, 5G connectivity, and incredible computational photography. Need specific recommendations?"],
                hi: ["рдмрдврд╝рд┐рдпрд╛ рд╕рд╡рд╛рд▓! рдирд╡реАрдирддрдо рд╕реНрдорд╛рд░реНрдЯрдлреЛрди рдореЗрдВ рдЙрдиреНрдирдд рдкреНрд░реЛрд╕реЗрд╕рд░, рдЙрдЪреНрдЪ-рд░рд┐рдлреНрд░реЗрд╢ рдбрд┐рд╕реНрдкреНрд▓реЗ рдФрд░ рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рдХреИрдорд░рд╛ рд╕рд┐рд╕реНрдЯрдо рд╣реИрдВред рдЖрдк рдХрд┐рд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?", "рд╕реНрдорд╛рд░реНрдЯрдлреЛрди рдмрд╣реБрдд рд╡рд┐рдХрд╕рд┐рдд рд╣реЛ рдЧрдП рд╣реИрдВ! рдЖрдЬ рдХреЗ рдЙрдкрдХрд░рдгреЛрдВ рдореЗрдВ AI рдХреНрд╖рдорддрд╛рдПрдВ, 5G рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╣реИрдВред"]
            }
        },
        {
            patterns: ['computer', 'laptop', 'desktop', 'pc', 'gaming pc'],
            responses: {
                en: ["Computers and laptops come in many types - gaming machines, workstations, ultrabooks, and more. Each serves different purposes. What are you looking for?", "From powerful desktops to portable ultrabooks, computers cater to various needs. Are you interested in gaming, work, or general use?"],
                hi: ["рдХрдВрдкреНрдпреВрдЯрд░ рдФрд░ рд▓реИрдкрдЯреЙрдк рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ - рдЧреЗрдорд┐рдВрдЧ рдорд╢реАрдиреЗрдВ, рд╡рд░реНрдХрд╕реНрдЯреЗрд╢рди, рдЕрд▓реНрдЯреНрд░рд╛рдмреБрдХред рдЖрдк рдХреНрдпрд╛ рдвреВрдВрдв рд░рд╣реЗ рд╣реИрдВ?", "рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдбреЗрд╕реНрдХрдЯреЙрдк рд╕реЗ рд▓реЗрдХрд░ рдкреЛрд░реНрдЯреЗрдмрд▓ рдЕрд▓реНрдЯреНрд░рд╛рдмреБрдХ рддрдХ, рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рднрд┐рдиреНрди рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рддреЗ рд╣реИрдВред"]
            }
        },
        {
            patterns: ['artificial intelligence', 'ai', 'machine learning', 'ml', 'deep learning'],
            responses: {
                en: ["AI and Machine Learning are revolutionizing technology! ЁЯдЦ From self-driving cars to medical diagnosis, AI is transforming every industry. What aspect interests you?", "Artificial Intelligence enables machines to learn from experience and perform human-like tasks. It's powering innovations across healthcare, finance, and entertainment!"],
                hi: ["AI рдФрд░ рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА рдореЗрдВ рдХреНрд░рд╛рдВрддрд┐ рд▓рд╛ рд░рд╣реЗ рд╣реИрдВ! ЁЯдЦ рд╕реНрд╡-рдЪрд╛рд▓рд┐рдд рдХрд╛рд░реЛрдВ рд╕реЗ рд▓реЗрдХрд░ рдЪрд┐рдХрд┐рддреНрд╕рд╛ рдирд┐рджрд╛рди рддрдХред рдХреМрди рд╕рд╛ рдкрд╣рд▓реВ рдЖрдкрдХреА рд░реБрдЪрд┐ рд╣реИ?", "рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐рдорддреНрддрд╛ рдорд╢реАрдиреЛрдВ рдХреЛ рдЕрдиреБрднрд╡ рд╕реЗ рд╕реАрдЦрдиреЗ рдФрд░ рдорд╛рдирд╡-рд╕рдорд╛рди рдХрд╛рд░реНрдп рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдмрдирд╛рддреА рд╣реИред"]
            }
        },
        {
            patterns: ['internet', 'wifi', 'broadband', 'network', '5g', '4g'],
            responses: {
                en: ["The internet connects billions worldwide! ЁЯМР From 4G to 5G, connectivity keeps improving. Need help with network issues or understanding internet technologies?", "Modern internet offers blazing speeds through fiber optics and 5G networks. What would you like to know about connectivity?"],
                hi: ["рдЗрдВрдЯрд░рдиреЗрдЯ рджреБрдирд┐рдпрд╛ рднрд░ рдореЗрдВ рдЕрд░рдмреЛрдВ рд▓реЛрдЧреЛрдВ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ! ЁЯМР 4G рд╕реЗ 5G рддрдХ, рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдореЗрдВ рд╕реБрдзрд╛рд░ рд╣реЛ рд░рд╣рд╛ рд╣реИред рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдорджрдж рдЪрд╛рд╣рд┐рдП?", "рдЖрдзреБрдирд┐рдХ рдЗрдВрдЯрд░рдиреЗрдЯ рдлрд╛рдЗрдмрд░ рдСрдкреНрдЯрд┐рдХреНрд╕ рдФрд░ 5G рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рддреЗрдЬ рдЧрддрд┐ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред"]
            }
        }
    ],
    health: [
        {
            patterns: ['exercise', 'fitness', 'workout', 'gym', 'running', 'yoga'],
            responses: {
                en: ["Regular exercise is fantastic for your health! ЁЯТк Aim for 150 minutes of moderate activity per week. This includes cardio, strength training, and flexibility work. What type of exercise interests you?", "Fitness is a journey! Whether it's yoga, running, or weightlifting, consistency is key. Start small and build gradually. What's your fitness goal?"],
                hi: ["рдирд┐рдпрдорд┐рдд рд╡реНрдпрд╛рдпрд╛рдо рдЖрдкрдХреЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреЗ рд▓рд┐рдП рд╢рд╛рдирджрд╛рд░ рд╣реИ! ЁЯТк рдкреНрд░рддрд┐ рд╕рдкреНрддрд╛рд╣ 150 рдорд┐рдирдЯ рдордзреНрдпрдо рдЧрддрд┐рд╡рд┐рдзрд┐ рдХрд╛ рд▓рдХреНрд╖реНрдп рд░рдЦреЗрдВред рдЖрдк рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╡реНрдпрд╛рдпрд╛рдо рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ?", "рдлрд┐рдЯрдиреЗрд╕ рдПрдХ рдпрд╛рддреНрд░рд╛ рд╣реИ! рдЪрд╛рд╣реЗ рд╡рд╣ рдпреЛрдЧ, рджреМрдбрд╝рдирд╛ рдпрд╛ рд╡реЗрдЯрд▓рд┐рдлреНрдЯрд┐рдВрдЧ рд╣реЛ, рдирд┐рд░рдВрддрд░рддрд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред"]
            }
        },
        {
            patterns: ['sleep', 'rest', 'tired', 'insomnia', 'sleeping'],
            responses: {
                en: ["Getting enough sleep is crucial for your health! ЁЯШ┤ Most adults need 7-9 hours per night. Try to maintain a consistent sleep schedule. Are you having trouble sleeping?", "Quality sleep is essential! Create a relaxing bedtime routine, avoid screens before bed, and keep your room cool and dark. Sweet dreams!"],
                hi: ["рдкрд░реНрдпрд╛рдкреНрдд рдиреАрдВрдж рдЖрдкрдХреЗ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ! ЁЯШ┤ рдЕрдзрд┐рдХрд╛рдВрд╢ рд╡рдпрд╕реНрдХреЛрдВ рдХреЛ рдкреНрд░рддрд┐ рд░рд╛рдд 7-9 рдШрдВрдЯреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдХреНрдпрд╛ рдЖрдкрдХреЛ рдиреАрдВрдж рдХреА рд╕рдорд╕реНрдпрд╛ рд╣реИ?", "рдЧреБрдгрд╡рддреНрддрд╛ рдиреАрдВрдж рдЖрд╡рд╢реНрдпрдХ рд╣реИ! рд╕реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕реНрдХреНрд░реАрди рд╕реЗ рдмрдЪреЗрдВ рдФрд░ рдЕрдкрдиреЗ рдХрдорд░реЗ рдХреЛ рдардВрдбрд╛ рдФрд░ рдЕрдВрдзреЗрд░рд╛ рд░рдЦреЗрдВред"]
            }
        },
        {
            patterns: ['diet', 'nutrition', 'food', 'healthy eating', 'vitamins'],
            responses: {
                en: ["Nutrition is the foundation of health! ЁЯеЧ Focus on whole foods, fruits, vegetables, lean proteins, and whole grains. Stay hydrated too! What's your dietary goal?", "A balanced diet includes all essential nutrients. Eat colorful vegetables, adequate protein, and healthy fats. Everything in moderation!"],
                hi: ["рдкреЛрд╖рдг рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХреА рдиреАрдВрд╡ рд╣реИ! ЁЯеЧ рд╕рдВрдкреВрд░реНрдг рдЦрд╛рджреНрдп рдкрджрд╛рд░реНрде, рдлрд▓, рд╕рдмреНрдЬрд┐рдпрд╛рдВ, рджреБрдмрд▓рд╛ рдкреНрд░реЛрдЯреАрди рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред рд╣рд╛рдЗрдбреНрд░реЗрдЯреЗрдб рд░рд╣реЗрдВ! рдЖрдкрдХрд╛ рдЖрд╣рд╛рд░ рд▓рдХреНрд╖реНрдп рдХреНрдпрд╛ рд╣реИ?", "рд╕рдВрддреБрд▓рд┐рдд рдЖрд╣рд╛рд░ рдореЗрдВ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдкреЛрд╖рдХ рддрддреНрд╡ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рд░рдВрдЧреАрди рд╕рдмреНрдЬрд┐рдпрд╛рдВ, рдкрд░реНрдпрд╛рдкреНрдд рдкреНрд░реЛрдЯреАрди рдФрд░ рд╕реНрд╡рд╕реНрде рд╡рд╕рд╛ рдЦрд╛рдПрдВред"]
            }
        },
        {
            patterns: ['water', 'hydration', 'drink water'],
            responses: {
                en: ["Staying hydrated is vital! ЁЯТз Aim for 8 glasses of water daily. Water helps with digestion, skin health, and energy levels. Drink up!", "Water is life! Keep a water bottle handy and sip throughout the day. Your body will thank you!"],
                hi: ["рд╣рд╛рдЗрдбреНрд░реЗрдЯреЗрдб рд░рд╣рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ! ЁЯТз рджреИрдирд┐рдХ 8 рдЧрд┐рд▓рд╛рд╕ рдкрд╛рдиреА рдХрд╛ рд▓рдХреНрд╖реНрдп рд░рдЦреЗрдВред рдкрд╛рдиреА рдкрд╛рдЪрди, рддреНрд╡рдЪрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред", "рдкрд╛рдиреА рдЬреАрд╡рди рд╣реИ! рдкрд╛рдиреА рдХреА рдмреЛрддрд▓ рдЕрдкрдиреЗ рдкрд╛рд╕ рд░рдЦреЗрдВ рдФрд░ рджрд┐рди рднрд░ рдореЗрдВ рдкреАрддреЗ рд░рд╣реЗрдВред"]
            }
        }
    ],
    education: [
        {
            patterns: ['study', 'learn', 'education', 'school', 'college', 'university'],
            responses: {
                en: ["Learning is a lifelong journey! ЁЯУЪ What subject would you like to learn about? I can help you with tips, resources, or explain various topics.", "Education opens doors! Whether it's math, science, languages, or arts, continuous learning keeps your mind sharp. What interests you?"],
                hi: ["рд╕реАрдЦрдирд╛ рдПрдХ рдЖрдЬреАрд╡рди рдпрд╛рддреНрд░рд╛ рд╣реИ! ЁЯУЪ рдЖрдк рдХрд┐рд╕ рд╡рд┐рд╖рдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? рдореИрдВ рд╕реБрдЭрд╛рд╡ рдпрд╛ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рд╛рде рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред", "рд╢рд┐рдХреНрд╖рд╛ рджрд░рд╡рд╛рдЬреЗ рдЦреЛрд▓рддреА рд╣реИ! рдЪрд╛рд╣реЗ рдЧрдгрд┐рдд, рд╡рд┐рдЬреНрдЮрд╛рди, рднрд╛рд╖рд╛рдПрдВ рд╣реЛрдВ, рдирд┐рд░рдВрддрд░ рд╕реАрдЦрдирд╛ рдЖрдкрдХреЗ рджрд┐рдорд╛рдЧ рдХреЛ рддреЗрдЬ рд░рдЦрддрд╛ рд╣реИред"]
            }
        },
        {
            patterns: ['math', 'mathematics', 'algebra', 'geometry', 'calculus'],
            responses: {
                en: ["Mathematics is the language of the universe! ЁЯФв From basic arithmetic to advanced calculus, math helps us understand patterns and solve problems. What topic do you need help with?", "Math can be fun! Whether it's solving equations or understanding geometry, practice makes perfect. Which area interests you?"],
                hi: ["рдЧрдгрд┐рдд рдмреНрд░рд╣реНрдорд╛рдВрдб рдХреА рднрд╛рд╖рд╛ рд╣реИ! ЁЯФв рдмреБрдирд┐рдпрд╛рджреА рдЕрдВрдХрдЧрдгрд┐рдд рд╕реЗ рд▓реЗрдХрд░ рдЙрдиреНрдирдд рдХрд▓рди рддрдХ, рдЧрдгрд┐рдд рд╣рдореЗрдВ рдкреИрдЯрд░реНрди рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред рдХрд┐рд╕ рд╡рд┐рд╖рдп рдореЗрдВ рдорджрдж рдЪрд╛рд╣рд┐рдП?", "рдЧрдгрд┐рдд рдордЬреЗрджрд╛рд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ! рдЪрд╛рд╣реЗ рд╕рдореАрдХрд░рдг рд╣рд▓ рдХрд░рдирд╛ рд╣реЛ рдпрд╛ рдЬреНрдпрд╛рдорд┐рддрд┐ рд╕рдордЭрдирд╛, рдЕрднреНрдпрд╛рд╕ рд╕реЗ рд╕рд┐рджреНрдзрд┐ рдорд┐рд▓рддреА рд╣реИред"]
            }
        },
        {
            patterns: ['science', 'physics', 'chemistry', 'biology'],
            responses: {
                en: ["Science is amazing! ЁЯФм It helps us understand how the world works. From atoms to galaxies, from cells to ecosystems. What scientific topic fascinates you?", "The scientific method has unlocked countless mysteries! Physics, chemistry, and biology each reveal different aspects of our universe."],
                hi: ["рд╡рд┐рдЬреНрдЮрд╛рди рдЕрджреНрднреБрдд рд╣реИ! ЁЯФм рдпрд╣ рд╣рдореЗрдВ рджреБрдирд┐рдпрд╛ рдХреЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЛ рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред рдХреМрди рд╕рд╛ рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рд╡рд┐рд╖рдп рдЖрдкрдХреЛ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ?", "рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рд╡рд┐рдзрд┐ рдиреЗ рдЕрдирдЧрд┐рдирдд рд░рд╣рд╕реНрдпреЛрдВ рдХреЛ рдЦреЛрд▓рд╛ рд╣реИ! рднреМрддрд┐рдХреА, рд░рд╕рд╛рдпрди рд╡рд┐рдЬреНрдЮрд╛рди рдФрд░ рдЬреАрд╡ рд╡рд┐рдЬреНрдЮрд╛рди рд╣рдорд╛рд░реЗ рдмреНрд░рд╣реНрдорд╛рдВрдб рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдкрд╣рд▓реБрдУрдВ рдХреЛ рдкреНрд░рдХрдЯ рдХрд░рддреЗ рд╣реИрдВред"]
            }
        }
    ],
    business: [
        {
            patterns: ['business', 'startup', 'entrepreneur', 'company'],
            responses: {
                en: ["Entrepreneurship is exciting! ЁЯТ╝ Starting a business requires planning, dedication, and adaptability. What aspect of business are you curious about?", "Business success comes from solving problems and creating value. From startups to corporations, innovation drives growth!"],
                hi: ["рдЙрджреНрдпрдорд┐рддрд╛ рд░реЛрдорд╛рдВрдЪрдХ рд╣реИ! ЁЯТ╝ рд╡реНрдпрд╡рд╕рд╛рдп рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпреЛрдЬрдирд╛, рд╕рдорд░реНрдкрдг рдФрд░ рдЕрдиреБрдХреВрд▓рдирд╢реАрд▓рддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рд╡реНрдпрд╡рд╕рд╛рдп рдХрд╛ рдХреМрди рд╕рд╛ рдкрд╣рд▓реВ рдЖрдкрдХреЛ рдЙрддреНрд╕реБрдХ рдХрд░рддрд╛ рд╣реИ?", "рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рд╕рдлрд▓рддрд╛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдФрд░ рдореВрд▓реНрдп рдмрдирд╛рдиреЗ рд╕реЗ рдЖрддреА рд╣реИ!"]
            }
        },
        {
            patterns: ['job', 'career', 'work', 'employment', 'resume'],
            responses: {
                en: ["Career development is crucial! ЁЯОп Focus on building skills, networking, and continuous learning. What's your career goal?", "Finding the right career path takes exploration. Identify your strengths, passions, and values. How can I help with your career?"],
                hi: ["рдХрд░рд┐рдпрд░ рд╡рд┐рдХрд╛рд╕ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ! ЁЯОп рдХреМрд╢рд▓ рдирд┐рд░реНрдорд╛рдг, рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рдФрд░ рдирд┐рд░рдВрддрд░ рд╕реАрдЦрдиреЗ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред рдЖрдкрдХрд╛ рдХрд░рд┐рдпрд░ рд▓рдХреНрд╖реНрдп рдХреНрдпрд╛ рд╣реИ?", "рд╕рд╣реА рдХрд░рд┐рдпрд░ рдкрде рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреНрд╡реЗрд╖рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдЕрдкрдиреА рддрд╛рдХрдд, рдЬреБрдиреВрди рдХреЛ рдкрд╣рдЪрд╛рдиреЗрдВред"]
            }
        },
        {
            patterns: ['money', 'finance', 'investment', 'savings', 'budget'],
            responses: {
                en: ["Financial literacy is empowering! ЁЯТ░ Save regularly, invest wisely, and live within your means. What financial topic interests you?", "Smart money management includes budgeting, saving, and strategic investing. Start early and be consistent!"],
                hi: ["рд╡рд┐рддреНрддреАрдп рд╕рд╛рдХреНрд╖рд░рддрд╛ рд╕рд╢рдХреНрдд рдмрдирд╛рддреА рд╣реИ! ЁЯТ░ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдмрдЪрдд рдХрд░реЗрдВ, рдмреБрджреНрдзрд┐рдорд╛рдиреА рд╕реЗ рдирд┐рд╡реЗрд╢ рдХрд░реЗрдВред рдХреМрди рд╕рд╛ рд╡рд┐рддреНрддреАрдп рд╡рд┐рд╖рдп рдЖрдкрдХреА рд░реБрдЪрд┐ рд╣реИ?", "рд╕реНрдорд╛рд░реНрдЯ рдзрди рдкреНрд░рдмрдВрдзрди рдореЗрдВ рдмрдЬрдЯ, рдмрдЪрдд рдФрд░ рд░рдгрдиреАрддрд┐рдХ рдирд┐рд╡реЗрд╢ рд╢рд╛рдорд┐рд▓ рд╣реИред"]
            }
        }
    ],
    entertainment: [
        {
            patterns: ['movie', 'film', 'cinema', 'bollywood', 'hollywood'],
            responses: {
                en: ["Movies are magical! ЁЯОм From action-packed blockbusters to thought-provoking dramas, cinema entertains and inspires. What genre do you enjoy?", "Film is art in motion! Great movies tell stories that stay with us. What's your favorite film?"],
                hi: ["рдлрд┐рд▓реНрдореЗрдВ рдЬрд╛рджреБрдИ рд╣реИрдВ! ЁЯОм рдПрдХреНрд╢рди рд╕реЗ рднрд░рдкреВрд░ рдмреНрд▓реЙрдХрдмрд╕реНрдЯрд░ рд╕реЗ рд▓реЗрдХрд░ рд╡рд┐рдЪрд╛рд░реЛрддреНрддреЗрдЬрдХ рдирд╛рдЯрдХреЛрдВ рддрдХред рдЖрдк рдХрд┐рд╕ рд╢реИрд▓реА рдХрд╛ рдЖрдирдВрдж рд▓реЗрддреЗ рд╣реИрдВ?", "рдлрд┐рд▓реНрдо рдЧрддрд┐ рдореЗрдВ рдХрд▓рд╛ рд╣реИ! рдорд╣рд╛рди рдлрд┐рд▓реНрдореЗрдВ рдРрд╕реА рдХрд╣рд╛рдирд┐рдпрд╛рдВ рдмрддрд╛рддреА рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реЗ рд╕рд╛рде рд░рд╣рддреА рд╣реИрдВред"]
            }
        },
        {
            patterns: ['music', 'song', 'singer', 'band', 'concert'],
            responses: {
                en: ["Music is universal! ЁЯО╡ It transcends language and culture. From classical to rock, hip-hop to jazz. What's your favorite genre?", "Music moves the soul! Whether it's energizing beats or soothing melodies, there's something for every mood."],
                hi: ["рд╕рдВрдЧреАрдд рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд╣реИ! ЁЯО╡ рдпрд╣ рднрд╛рд╖рд╛ рдФрд░ рд╕рдВрд╕реНрдХреГрддрд┐ рд╕реЗ рдкрд░реЗ рд╣реИред рд╢рд╛рд╕реНрддреНрд░реАрдп рд╕реЗ рд░реЙрдХ, рд╣рд┐рдк-рд╣реЙрдк рд╕реЗ рдЬреИрдЬрд╝ рддрдХред рдЖрдкрдХреА рдкрд╕рдВрджреАрджрд╛ рд╢реИрд▓реА рдХреМрди рд╕реА рд╣реИ?", "рд╕рдВрдЧреАрдд рдЖрддреНрдорд╛ рдХреЛ рдЫреВрддрд╛ рд╣реИ! рдЪрд╛рд╣реЗ рдКрд░реНрдЬрд╛рд╡рд╛рди рдмреАрдЯ рд╣реЛ рдпрд╛ рд╕реБрдЦрджрд╛рдпрдХ рдзреБрдиред"]
            }
        },
        {
            patterns: ['game', 'gaming', 'video game', 'esports'],
            responses: {
                en: ["Gaming is huge! ЁЯОо From casual mobile games to competitive esports, gaming offers entertainment and challenges. What games do you play?", "Video games combine art, storytelling, and interactivity. The gaming industry rivals Hollywood! What's your favorite game?"],
                hi: ["рдЧреЗрдорд┐рдВрдЧ рдмрд╣реБрдд рдмрдбрд╝рд╛ рд╣реИ! ЁЯОо рд╕рд╛рдзрд╛рд░рдг рдореЛрдмрд╛рдЗрд▓ рдЧреЗрдо рд╕реЗ рд▓реЗрдХрд░ рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзреА рдПрд╕реНрдкреЛрд░реНрдЯреНрд╕ рддрдХред рдЖрдк рдХреМрди рд╕реЗ рдЧреЗрдо рдЦреЗрд▓рддреЗ рд╣реИрдВ?", "рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдХрд▓рд╛, рдХрд╣рд╛рдиреА рдХрд╣рдиреЗ рдФрд░ рдЕрдВрддрдГрдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред рдЖрдкрдХрд╛ рдкрд╕рдВрджреАрджрд╛ рдЧреЗрдо рдХреМрди рд╕рд╛ рд╣реИ?"]
            }
        }
    ],
    general: [
        {
            patterns: ['weather', 'rain', 'sunny', 'climate', 'temperature'],
            responses: {
                en: ["Weather affects our daily lives! тШАя╕ПЁЯМзя╕П Climate patterns are fascinating. I can't check real-time weather, but I can discuss climate topics!", "Weather and climate are different - weather is short-term, climate is long-term patterns. What would you like to know?"],
                hi: ["рдореМрд╕рдо рд╣рдорд╛рд░реЗ рджреИрдирд┐рдХ рдЬреАрд╡рди рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ! тШАя╕ПЁЯМзя╕П рдореИрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХрд╛ рдореМрд╕рдо рдирд╣реАрдВ рджреЗрдЦ рд╕рдХрддрд╛, рд▓реЗрдХрд┐рди рдЬрд▓рд╡рд╛рдпреБ рд╡рд┐рд╖рдпреЛрдВ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ!", "рдореМрд╕рдо рдФрд░ рдЬрд▓рд╡рд╛рдпреБ рдЕрд▓рдЧ рд╣реИрдВ - рдореМрд╕рдо рдЕрд▓реНрдкрдХрд╛рд▓рд┐рдХ рд╣реИ, рдЬрд▓рд╡рд╛рдпреБ рджреАрд░реНрдШрдХрд╛рд▓рд┐рдХ рдкреИрдЯрд░реНрди рд╣реИред"]
            }
        },
        {
            patterns: ['time', 'date', 'day', 'today', 'clock'],
            responses: {
                en: ["Time is precious! тП░ I don't have access to real-time data, but I can discuss time management, productivity, and more!", "Managing time effectively is a valuable skill. What time-related topic interests you?"],
                hi: ["рд╕рдордп рдЕрдирдореЛрд▓ рд╣реИ! тП░ рдореЗрд░реЗ рдкрд╛рд╕ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдХрд╛ рдбреЗрдЯрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рд╕рдордп рдкреНрд░рдмрдВрдзрди рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ!", "рд╕рдордп рдХреЛ рдкреНрд░рднрд╛рд╡реА рдврдВрдЧ рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдирд╛ рдПрдХ рдореВрд▓реНрдпрд╡рд╛рди рдХреМрд╢рд▓ рд╣реИред"]
            }
        },
        {
            patterns: ['joke', 'funny', 'laugh', 'lol','humor'],
            responses: {
                en: ["Why don't scientists trust atoms? Because they make up everything! ", "What do you call a bear with no teeth? A gummy bear! ЁЯР╗", "Why did the scarecrow win an award? He was outstanding in his field! ЁЯМ╛"],
                hi: ["рд╢рд┐рдХреНрд╖рдХ: рдмрддрд╛рдУ 5 рдЪреАрдЬреЗрдВ рдЬреЛ рджреВрдз рдореЗрдВ рд╣реЛрддреА рд╣реИрдВред рдЫрд╛рддреНрд░: рдордХреНрдЦреА, рдзреВрд▓, рдЧрдВрджрдЧреА, рдмрд╛рд▓ рдФрд░... рд╢рд┐рдХреНрд╖рдХ: рдЪреБрдк рдХрд░реЛ! ", "рд╣рд╛рд╕реНрдп рдЬреАрд╡рди рдХрд╛ рдорд╕рд╛рд▓рд╛ рд╣реИ! ", "рдкрддрд┐: рддреБрдо рдЗрддрдиреА рд╕реБрдВрджрд░ рдХреНрдпреЛрдВ рд╣реЛ? рдкрддреНрдиреА: рдХреНрдпреЛрдВрдХрд┐ рдореИрдВ рддреБрдореНрд╣рд╛рд░реА рд╣реВрдВ! рдкрддрд┐: рддреЛ рдореИрдВ рднреА рд╕реБрдВрджрд░ рд╣реВрдВ рдирд╛? рдкрддреНрдиреА: рд╣рд╛рдВ, рдЭреВрда рдмреЛрд▓рдиреЗ рдореЗрдВ! ЁЯШД"]
            }
        },
        {
            patterns: ['love', 'relationship', 'friendship', 'family'],
            responses: {
                en: ["Relationships are the essence of life! тЭдя╕П Whether family, friends, or romantic partners, nurturing connections brings joy and meaning.", "Love and friendship require communication, trust, and understanding. Strong relationships make life beautiful!"],
                hi: ["рд░рд┐рд╢реНрддреЗ рдЬреАрд╡рди рдХрд╛ рд╕рд╛рд░ рд╣реИрдВ! тЭдя╕П рдЪрд╛рд╣реЗ рдкрд░рд┐рд╡рд╛рд░, рджреЛрд╕реНрдд рдпрд╛ рд░реЛрдорд╛рдВрдЯрд┐рдХ рдкрд╛рд░реНрдЯрдирд░ рд╣реЛрдВ, рд╕рдВрдмрдВрдзреЛрдВ рдХрд╛ рдкреЛрд╖рдг рдХрд░рдирд╛ рдЦреБрд╢реА рдФрд░ рдЕрд░реНрде рд▓рд╛рддрд╛ рд╣реИред", "рдкреНрд░реЗрдо рдФрд░ рджреЛрд╕реНрддреА рдХреЛ рд╕рдВрдЪрд╛рд░, рд╡рд┐рд╢реНрд╡рд╛рд╕ рдФрд░ рд╕рдордЭ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдордЬрдмреВрдд рд░рд┐рд╢реНрддреЗ рдЬреАрд╡рди рдХреЛ рд╕реБрдВрджрд░ рдмрдирд╛рддреЗ рд╣реИрдВ!"]
            }
        },
        {
            patterns: ['travel', 'trip', 'vacation', 'tour', 'place'],
            responses: {
                en: ["Travel broadens horizons! тЬИя╕П Exploring new places, cultures, and cuisines enriches life. What's your dream destination?", "The world is full of amazing places! From mountains to beaches, cities to villages. Where would you like to visit?"],
                hi: ["рдпрд╛рддреНрд░рд╛ рдХреНрд╖рд┐рддрд┐рдЬ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рддреА рд╣реИ! тЬИя╕П рдирдИ рдЬрдЧрд╣реЛрдВ, рд╕рдВрд╕реНрдХреГрддрд┐рдпреЛрдВ рдХрд╛ рдЕрдиреНрд╡реЗрд╖рдг рдЬреАрд╡рди рдХреЛ рд╕рдореГрджреНрдз рдХрд░рддрд╛ рд╣реИред рдЖрдкрдХрд╛ рд╕рдкрдиреЛрдВ рдХрд╛ рдЧрдВрддрд╡реНрдп рдХреМрди рд╕рд╛ рд╣реИ?", "рджреБрдирд┐рдпрд╛ рдЕрджреНрднреБрдд рд╕реНрдерд╛рдиреЛрдВ рд╕реЗ рднрд░реА рд╣реИ! рдкрд╣рд╛рдбрд╝реЛрдВ рд╕реЗ рд╕рдореБрджреНрд░ рддрдЯреЛрдВ рддрдХ, рд╢рд╣рд░реЛрдВ рд╕реЗ рдЧрд╛рдВрд╡реЛрдВ рддрдХред рдЖрдк рдХрд╣рд╛рдВ рдЬрд╛рдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?"]
            }
        },
        {
            patterns: ['food', 'cooking', 'recipe', 'dish', 'cuisine'],
            responses: {
                en: ["Food brings people together! ЁЯН╜я╕П From Italian pasta to Indian curry, world cuisines are diverse and delicious. What's your favorite dish?", "Cooking is an art and science! Experimenting with flavors and techniques creates culinary magic. Do you enjoy cooking?"],
                hi: ["рднреЛрдЬрди рд▓реЛрдЧреЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рд▓рд╛рддрд╛ рд╣реИ! ЁЯН╜я╕П рдЗрддрд╛рд▓рд╡реА рдкрд╛рд╕реНрддрд╛ рд╕реЗ рднрд╛рд░рддреАрдп рдХрд░реА рддрдХ, рд╡рд┐рд╢реНрд╡ рд╡реНрдпрдВрдЬрди рд╡рд┐рд╡рд┐рдз рд╣реИрдВред рдЖрдкрдХрд╛ рдкрд╕рдВрджреАрджрд╛ рд╡реНрдпрдВрдЬрди рдХреМрди рд╕рд╛ рд╣реИ?", "рдЦрд╛рдирд╛ рдмрдирд╛рдирд╛ рдПрдХ рдХрд▓рд╛ рдФрд░ рд╡рд┐рдЬреНрдЮрд╛рди рд╣реИ! рд╕реНрд╡рд╛рдж рдФрд░ рддрдХрдиреАрдХреЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рдпреЛрдЧ рдкрд╛рдХ рдЬрд╛рджреВ рдкреИрджрд╛ рдХрд░рддрд╛ рд╣реИред рдХреНрдпрд╛ рдЖрдк рдЦрд╛рдирд╛ рдмрдирд╛рдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ?"]
            }
        },
        {
            patterns: ['sports', 'cricket', 'football', 'basketball', 'tennis'],
            responses: {
                en: ["Sports unite people! тЪ╜ЁЯПП From cricket to football, sports teach teamwork, discipline, and perseverance. What's your favorite sport?", "Athletics push human limits! Whether watching or playing, sports inspire greatness. Do you play any sports?"],
                hi: ["рдЦреЗрд▓ рд▓реЛрдЧреЛрдВ рдХреЛ рдПрдХрдЬреБрдЯ рдХрд░рддреЗ рд╣реИрдВ! тЪ╜ЁЯПП рдХреНрд░рд┐рдХреЗрдЯ рд╕реЗ рдлреБрдЯрдмреЙрд▓ рддрдХ, рдЦреЗрд▓ рдЯреАрдо рд╡рд░реНрдХ, рдЕрдиреБрд╢рд╛рд╕рди рд╕рд┐рдЦрд╛рддреЗ рд╣реИрдВред рдЖрдкрдХрд╛ рдкрд╕рдВрджреАрджрд╛ рдЦреЗрд▓ рдХреМрди рд╕рд╛ рд╣реИ?", "рдПрдерд▓реЗрдЯрд┐рдХреНрд╕ рдорд╛рдирд╡реАрдп рд╕реАрдорд╛рдУрдВ рдХреЛ рдЖрдЧреЗ рдмрдврд╝рд╛рддрд╛ рд╣реИ! рджреЗрдЦрдирд╛ рд╣реЛ рдпрд╛ рдЦреЗрд▓рдирд╛, рдЦреЗрд▓ рдорд╣рд╛рдирддрд╛ рдХреЛ рдкреНрд░реЗрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред"]
            }
        },
        {
            patterns: ['who are you', 'what are you', 'your name', 'about you'],
            responses: {
                en: ["I'm an AI chatbot designed to help and chat with you! ЁЯдЦ I work completely offline using pattern matching. Ask me anything!", "I'm your friendly AI assistant! I can chat, answer questions, and help with various topics. All without needing internet!"],
                hi: ["рдореИрдВ рдПрдХ AI рдЪреИрдЯрдмреЙрдЯ рд╣реВрдВ рдЬреЛ рдЖрдкрдХреА рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ! ЁЯдЦ рдореИрдВ рдкреИрдЯрд░реНрди рдореИрдЪрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдСрдлрд▓рд╛рдЗрди рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВред рдореБрдЭрд╕реЗ рдХреБрдЫ рднреА рдкреВрдЫреЗрдВ!", "рдореИрдВ рдЖрдкрдХрд╛ рджреЛрд╕реНрддрд╛рдирд╛ AI рд╕рд╣рд╛рдпрдХ рд╣реВрдВ! рдореИрдВ рдЪреИрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ, рд╕рд╡рд╛рд▓реЛрдВ рдХреЗ рдЬрд╡рд╛рдм рджреЗ рд╕рдХрддрд╛ рд╣реВрдВред рд╕рднреА рдЗрдВрдЯрд░рдиреЗрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдмрд┐рдирд╛!"]
            }
        }
    ]
};

const fallbackResponses = {
    en: [
        "That's an interesting question! I might not have a specific answer, but I'd suggest doing more research or asking an expert in that field.",
        "Hmm, I don't have detailed information on that. Could you provide more context or ask something else? ЁЯдФ",
        "That's a great topic! While I might not know everything about it, I'm always happy to discuss it further. ЁЯШК",
        "I appreciate your curiosity! I might not have the exact answer, but feel free to ask me about technology, health, education, or other topics!",
        "Interesting! I'm still learning about that. Is there something else I can help you with?"
    ],
    hi: [
        "рдпрд╣ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рд╕рд╡рд╛рд▓ рд╣реИ! рдореЗрд░реЗ рдкрд╛рд╕ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИред рдХреНрдпрд╛ рдЖрдк рдФрд░ рд╕рдВрджрд░реНрдн рджреЗ рд╕рдХрддреЗ рд╣реИрдВ? ЁЯдФ",
        "рд╣рдореНрдо, рдореЗрд░реЗ рдкрд╛рд╕ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╕реНрддреГрдд рдЬрд╛рдирдХрд╛рд░реА рдирд╣реАрдВ рд╣реИред рдХреНрдпрд╛ рдЖрдк рдХреБрдЫ рдФрд░ рдкреВрдЫ рд╕рдХрддреЗ рд╣реИрдВ?",
        "рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╡рд┐рд╖рдп рд╣реИ! рдореИрдВ рдЗрд╕ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░рдиреЗ рдореЗрдВ рдЦреБрд╢ рд╣реВрдВред ЁЯШК",
        "рдореИрдВ рдЖрдкрдХреА рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рдХреА рд╕рд░рд╛рд╣рдирд╛ рдХрд░рддрд╛ рд╣реВрдВ! рдХреНрдпрд╛ рдореИрдВ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА, рд╕реНрд╡рд╛рд╕реНрдереНрдп, рд╢рд┐рдХреНрд╖рд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?",
        "рджрд┐рд▓рдЪрд╕реНрдк! рдореИрдВ рдЕрднреА рднреА рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрдЦ рд░рд╣рд╛ рд╣реВрдВред рдХреНрдпрд╛ рдХреБрдЫ рдФрд░ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдореИрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ?"
    ]
};

// DOM Elements
const elements = {
    themeToggle: document.getElementById('themeToggle'),
    btnEnglish: document.getElementById('btnEnglish'),
    btnHindi: document.getElementById('btnHindi'),
    chatInterface: document.getElementById('chatInterface'),
    chatMessages: document.getElementById('chatMessages'),
    messageInput: document.getElementById('messageInput'),
    sendBtn: document.getElementById('sendBtn'),
    micBtn: document.getElementById('micBtn'),
    typingIndicator: document.getElementById('typingIndicator'),
    avatar: document.getElementById('avatar'),
    avatarStatus: document.getElementById('avatarStatus'),
    voiceIndicator: document.getElementById('voiceIndicator'),
    voiceOutputToggle: document.getElementById('voiceOutputToggle'),
    clearChatBtn: document.getElementById('clearChatBtn')
};

// Speech Recognition Setup
let recognition = null;
let isListening = false;

if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.continuous = false;
    recognition.interimResults = true;
}

// Speech Synthesis
let synthesis = window.speechSynthesis;

// Initialize App
function init() {
    // Set initial theme
    document.documentElement.setAttribute('data-theme', appState.theme);
    updateThemeIcon();
    
    // Send greeting message
    addMessage('bot', languages[appState.language].greeting);
    updateAvatarStatus('Ready');
    
    // Event Listeners
    elements.themeToggle.addEventListener('click', toggleTheme);
    elements.btnEnglish.addEventListener('click', () => switchLanguage('en'));
    elements.btnHindi.addEventListener('click', () => switchLanguage('hi'));
    elements.sendBtn.addEventListener('click', sendMessage);
    elements.messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendMessage();
    });
    elements.micBtn.addEventListener('click', toggleVoiceRecognition);
    elements.voiceOutputToggle.addEventListener('change', (e) => {
        appState.voiceOutputEnabled = e.target.checked;
    });
    elements.clearChatBtn.addEventListener('click', clearChat);
    
    // Setup speech recognition if available
    if (recognition) {
        setupSpeechRecognition();
    } else {
        elements.micBtn.style.display = 'none';
    }
}

// Theme Management
function toggleTheme() {
    appState.theme = appState.theme === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', appState.theme);
    updateThemeIcon();
}

function updateThemeIcon() {
    const icon = elements.themeToggle.querySelector('.theme-icon');
    icon.textContent = appState.theme === 'light' ? 'ЁЯМЩ' : 'тШАя╕П';
}

// Language Management
function switchLanguage(lang) {
    appState.language = lang;
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    if (lang === 'en') {
        elements.btnEnglish.classList.add('active');
        elements.messageInput.placeholder = 'Type your message...';
    } else {
        elements.btnHindi.classList.add('active');
        elements.messageInput.placeholder = 'рдЕрдкрдирд╛ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦреЗрдВ...';
    }
    
    // Update speech recognition language
    if (recognition) {
        recognition.lang = languages[lang].code;
    }
}

// Pattern Matching Engine
function detectLanguage(text) {
    // Check for Hindi characters (Devanagari script)
    const hindiPattern = /[\u0900-\u097F]/;
    return hindiPattern.test(text) ? 'hi' : 'en';
}

function extractKeywords(text) {
    // Convert to lowercase and remove punctuation
    const cleaned = text.toLowerCase().replace(/[^a-z0-9\s\u0900-\u097F]/g, ' ');
    return cleaned.split(/\s+/).filter(word => word.length > 2);
}

function findBestMatch(userMessage) {
    const keywords = extractKeywords(userMessage);
    const messageLower = userMessage.toLowerCase();
    let bestMatch = null;
    let highestScore = 0;
    
    // Search through all categories
    for (const category in knowledgeBase) {
        for (const entry of knowledgeBase[category]) {
            let score = 0;
            
            // Check if any pattern matches
            for (const pattern of entry.patterns) {
                if (messageLower.includes(pattern.toLowerCase())) {
                    score += 10; // High score for direct pattern match
                }
                
                // Check keyword matches
                const patternWords = pattern.toLowerCase().split(/\s+/);
                for (const keyword of keywords) {
                    if (patternWords.includes(keyword)) {
                        score += 3;
                    }
                }
            }
            
            if (score > highestScore) {
                highestScore = score;
                bestMatch = entry;
            }
        }
    }
    
    // Return match only if score is significant
    return highestScore > 5 ? bestMatch : null;
}

function getResponse(userMessage) {
    const detectedLang = detectLanguage(userMessage);
    const responseLang = appState.language; // Use selected language for response
    
    // Find best matching response
    const match = findBestMatch(userMessage);
    
    if (match && match.responses[responseLang]) {
        // Return random response from matched patterns
        const responses = match.responses[responseLang];
        return responses[Math.floor(Math.random() * responses.length)];
    }
    
    // Return fallback response
    const fallbacks = fallbackResponses[responseLang];
    return fallbacks[Math.floor(Math.random() * fallbacks.length)];
}

// Message Management
function addMessage(type, content) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${type}`;
    
    const messageContent = document.createElement('div');
    messageContent.className = 'message-content';
    messageContent.textContent = content;
    
    messageDiv.appendChild(messageContent);
    elements.chatMessages.appendChild(messageDiv);
    
    // Scroll to bottom
    elements.chatMessages.scrollTop = elements.chatMessages.scrollHeight;
    
    // Speak the message if it's from bot and voice output is enabled
    if (type === 'bot' && appState.voiceOutputEnabled) {
        speakText(content);
    }
}

function clearChat() {
    elements.chatMessages.innerHTML = '';
    appState.conversationHistory = [];
    addMessage('bot', languages[appState.language].greeting);
}

// Send Message
function sendMessage() {
    const message = elements.messageInput.value.trim();
    
    if (!message) return;
    
    // Add user message
    addMessage('user', message);
    elements.messageInput.value = '';
    
    // Update avatar state
    updateAvatarState('thinking');
    updateAvatarStatus('Thinking...');
    
    // Show typing indicator
    elements.typingIndicator.style.display = 'flex';
    
    // Add to conversation history
    appState.conversationHistory.push({
        role: 'user',
        content: message
    });
    
    // Simulate thinking delay for natural feel
    setTimeout(() => {
        // Get response from pattern matching
        const response = getResponse(message);
        
        // Hide typing indicator
        elements.typingIndicator.style.display = 'none';
        
        // Add bot response
        addMessage('bot', response);
        
        // Add to conversation history
        appState.conversationHistory.push({
            role: 'assistant',
            content: response
        });
        
        // Update avatar state
        updateAvatarState('speaking');
        updateAvatarStatus('Speaking...');
        
        // Reset avatar after speaking
        setTimeout(() => {
            updateAvatarState('neutral');
            updateAvatarStatus('Ready');
        }, 2000);
    }, 800); // Simulate processing time
}

// Avatar State Management
function updateAvatarState(state) {
    elements.avatar.className = `avatar ${state}`;
}

function updateAvatarStatus(status) {
    elements.avatarStatus.textContent = status;
}

// Speech Recognition
function setupSpeechRecognition() {
    recognition.lang = languages[appState.language].code;
    
    recognition.onstart = () => {
        isListening = true;
        elements.micBtn.classList.add('active');
        elements.voiceIndicator.style.display = 'flex';
        updateAvatarState('thinking');
        updateAvatarStatus('Listening...');
    };
    
    recognition.onresult = (event) => {
        let transcript = '';
        
        for (let i = event.resultIndex; i < event.results.length; i++) {
            transcript += event.results[i][0].transcript;
        }
        
        elements.messageInput.value = transcript;
        
        // If final result, send the message
        if (event.results[event.results.length - 1].isFinal) {
            setTimeout(() => {
                sendMessage();
            }, 500);
        }
    };
    
    recognition.onerror = (event) => {
        console.error('Speech recognition error:', event.error);
        isListening = false;
        elements.micBtn.classList.remove('active');
        elements.voiceIndicator.style.display = 'none';
        updateAvatarState('neutral');
        updateAvatarStatus('Ready');
        
        if (event.error === 'not-allowed') {
            alert('Microphone access denied. Please allow microphone access to use voice input.');
        }
    };
    
    recognition.onend = () => {
        isListening = false;
        elements.micBtn.classList.remove('active');
        elements.voiceIndicator.style.display = 'none';
        updateAvatarState('neutral');
        updateAvatarStatus('Ready');
    };
}

function toggleVoiceRecognition() {
    if (!recognition) {
        alert('Speech recognition is not supported in your browser.');
        return;
    }
    
    if (isListening) {
        recognition.stop();
    } else {
        recognition.start();
    }
}

// Text-to-Speech
function speakText(text) {
    // Cancel any ongoing speech
    synthesis.cancel();
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = languages[appState.language].voiceCode;
    utterance.rate = 1.0;
    utterance.pitch = 1.0;
    
    // Try to find a voice for the selected language
    const voices = synthesis.getVoices();
    const voice = voices.find(v => v.lang.startsWith(languages[appState.language].code.split('-')[0]));
    
    if (voice) {
        utterance.voice = voice;
    }
    
    utterance.onstart = () => {
        updateAvatarState('speaking');
        updateAvatarStatus('Speaking...');
    };
    
    utterance.onend = () => {
        updateAvatarState('neutral');
        updateAvatarStatus('Ready');
    };
    
    synthesis.speak(utterance);
}

// Initialize voices (for speech synthesis)
if (synthesis) {
    // Load voices
    if (synthesis.getVoices().length === 0) {
        synthesis.addEventListener('voiceschanged', () => {
            synthesis.getVoices();
        });
    }
}

// Start the application
init();